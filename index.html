<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber Threat Detection Dashboard - Real-Time</title>

<style>
:root{
  --bg:#0b0f19; --panel:#0f1724; --muted:#97a6b2;
  --neon1:#00eaff; --neon2:#00ff88; --neon3:#ff00ff; --accent:#06b6d4;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,Segoe UI,Roboto,sans-serif;}
body{
  background:linear-gradient(135deg, #0b0f19, #0c1122, #0b0f19);
  overflow-x:hidden;
  color:#e6f9ff;
  padding:16px;
  animation: bgMove 20s linear infinite;
}
@keyframes bgMove{
  0%{background-position:0 0;}
  100%{background-position:500px 500px;}
}
header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;margin-bottom:16px;}
h1{font-size:22px;text-shadow:0 0 12px var(--neon1),0 0 24px var(--neon2);}
.subtitle{font-size:13px;color:var(--muted);text-shadow:0 0 4px #000;}
.status-badge{
  padding:6px 12px;border-radius:999px;font-weight:700;font-size:13px;
  display:inline-flex;align-items:center;gap:8px;text-shadow:0 0 6px #000;
  animation:badgePulse 2s infinite alternate;
}
@keyframes badgePulse{
  0%{box-shadow:0 0 6px var(--neon2);}
  50%{box-shadow:0 0 16px var(--neon1);}
  100%{box-shadow:0 0 6px var(--neon2);}
}
.status-sec{background:#063b2f;color:var(--neon2);}
.status-mod{background:#4b3a05;color:#ffea8a;}
.status-high{background:#3b0f12;color:#ff7777;animation:glowPulse 1.5s infinite alternate;}
@keyframes glowPulse{
  0%{text-shadow:0 0 8px #ff5555,0 0 12px #ff2222;}
  50%{text-shadow:0 0 14px #ff8888,0 0 20px #ff4444;}
  100%{text-shadow:0 0 8px #ff5555,0 0 12px #ff2222;}
}

/* Layout */
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;}
.card{background:var(--panel); padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,0.03);
box-shadow:0 0 10px rgba(0,255,255,0.15),0 0 20px rgba(0,255,200,0.1);
transition:0.3s;animation:cardPulse 3s infinite alternate;}
@keyframes cardPulse{
  0%{box-shadow:0 0 8px var(--neon1),0 0 16px var(--neon2);}
  50%{box-shadow:0 0 18px var(--neon1),0 0 28px var(--neon2);}
  100%{box-shadow:0 0 8px var(--neon1),0 0 16px var(--neon2);}
}
.col-3{grid-column:span 3;}.col-4{grid-column:span 4;}.col-5{grid-column:span 5;}.col-6{grid-column:span 6;}.col-7{grid-column:span 7;}.col-12{grid-column:span 12;}
@media (max-width:1000px){.col-3,.col-4,.col-5,.col-6,.col-7{grid-column:span 12}}

/* Summary */
.stat-title{font-size:12px;color:var(--muted);margin-bottom:6px;text-shadow:0 0 4px #000;}
.stat-value{font-size:22px;font-weight:800;text-shadow:0 0 8px var(--neon1);}

/* Buttons */
.btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:700;transition:all 0.3s;text-shadow:0 0 4px #000;}
.btn-neon{background:linear-gradient(90deg,var(--neon1),var(--neon2));color:#002;box-shadow:0 0 10px var(--neon1),0 0 20px var(--neon2);animation:btnGlow 2s infinite alternate;}
.btn-neon:hover{box-shadow:0 0 18px var(--neon1),0 0 28px var(--neon2);transform:translateY(-2px);}
@keyframes btnGlow{0%{box-shadow:0 0 10px var(--neon1),0 0 20px var(--neon2);}50%{box-shadow:0 0 16px var(--neon1),0 0 26px var(--neon2);}100%{box-shadow:0 0 10px var(--neon1),0 0 20px var(--neon2);}}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--neon1);}
.btn-ghost:hover{background:rgba(0,255,200,0.05);}

/* Table */
table{width:100%;border-collapse:collapse;font-size:13px;overflow-x:auto;display:block;}
th,td{padding:8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.03)}
th{color:var(--muted);font-size:12px;}
.sev-high{color:#ff7b7b;font-weight:700;text-shadow:0 0 4px #ff0000;animation:alertPulse 1s infinite alternate;}
.sev-med{color:#ffd27a;font-weight:700;text-shadow:0 0 4px #ff8800;}
.sev-low{color:#8fffc8;font-weight:700;text-shadow:0 0 4px #00ff88;}
@keyframes alertPulse{
  0%{text-shadow:0 0 4px #ff0000;}
  50%{text-shadow:0 0 12px #ff2222;}
  100%{text-shadow:0 0 4px #ff0000;}
}

/* Progress bars */
.progress-bar{height:10px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--neon1),var(--neon2));transition:width 0.5s ease-in-out;animation:barPulse 1.5s infinite alternate;}
@keyframes barPulse{0%{opacity:0.8;}50%{opacity:1;}100%{opacity:0.8;}}

/* Footer */
footer{margin-top:18px;color:var(--muted);font-size:12px;text-align:center;text-shadow:0 0 4px #000;}
</style>
</head>
<body>

<header>
  <div>
    <h1>Cyber Threat Detection Dashboard</h1>
    <div class="subtitle">Real-time Neon Monitoring</div>
  </div>
  <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:8px">
    <div id="statusBadge" class="status-badge status-sec">Secure</div>
    <div style="text-align:right"><div class="subtitle">Last update</div><div id="lastUpdate" class="subtitle">--</div></div>
  </div>
</header>

<div class="grid" style="margin-bottom:16px">
  <div class="card col-3"><div class="stat-title">Total Threats</div><div id="totalThreats" class="stat-value">0</div></div>
  <div class="card col-3"><div class="stat-title">High</div><div id="highThreats" class="stat-value">0</div></div>
  <div class="card col-3"><div class="stat-title">Medium</div><div id="medThreats" class="stat-value">0</div></div>
  <div class="card col-3"><div class="stat-title">Low</div><div id="lowThreats" class="stat-value">0</div></div>
</div>

<div class="grid">
  <div class="col-5">
    <div class="card" style="margin-bottom:12px">
      <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
        <div><div style="font-weight:800">Device Sync</div><div class="subtitle">Bluetooth / API / WebSocket</div></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn btn-neon" id="btnBluetooth">Bluetooth</button>
          <button class="btn btn-ghost" id="btnAPI">Sync API</button>
          <button class="btn btn-ghost" id="btnWS">WebSocket</button>
        </div>
      </div>
      <div style="margin-top:12px">
        <div id="deviceStatus" class="subtitle">Not connected</div>
        <input id="deviceUrl" type="text" placeholder="API or WS URL" style="width:100%;margin-top:8px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit">
      </div>
    </div>

    <div class="card" style="margin-bottom:12px">
      <div style="font-weight:800;margin-bottom:8px">Recent Alerts</div>
      <table aria-label="Recent alerts">
        <thead><tr><th>Time</th><th>Type</th><th>Severity</th><th>Source</th></tr></thead>
        <tbody id="alertsTable"></tbody>
      </table>
    </div>

    <div class="card">
      <div style="font-weight:800;margin-bottom:8px">Active Threats</div>
      <div id="activeThreats"></div>
    </div>
  </div>
</div>

<footer>Neon Cyber Dashboard â€” Real-Time Integration</footer>

<script>
function byId(id){return document.getElementById(id)}
function nowIso(){ return new Date().toLocaleTimeString() }

/* Dashboard updater */
function updateDashboard(data){
  byId('totalThreats').textContent = data.total ?? ((data.high??0)+(data.medium??0)+(data.low??0))
  byId('highThreats').textContent = data.high ?? 0
  byId('medThreats').textContent = data.medium ?? 0
  byId('lowThreats').textContent = data.low ?? 0
  byId('lastUpdate').textContent = nowIso()

  const statusBadge = byId('statusBadge')
  const high = data.high ?? 0
  if(high>=8){statusBadge.className='status-badge status-high';statusBadge.textContent='High Alert'}
  else if(high>=4){statusBadge.className='status-mod';statusBadge.textContent='Moderate'}
  else{statusBadge.className='status-badge status-sec';statusBadge.textContent='Secure'}

  // Alerts
  const alertsTable = byId('alertsTable')
  alertsTable.innerHTML=''
  const recent = data.recentAlerts ?? []
  for(const a of recent.slice(0,8)){
    const tr=document.createElement('tr')
    tr.innerHTML=`<td>${a.time}</td><td>${a.type}</td><td class="${a.severity==='High'?'sev-high':a.severity==='Medium'?'sev-med':'sev-low'}">${a.severity}</td><td>${a.src}</td>`
    alertsTable.appendChild(tr)
  }

  // Active threats
  const activeEl=byId('activeThreats')
  activeEl.innerHTML=''
  const active=data.active ?? []
  for(const t of active.slice(0,6)){
    const wrap=document.createElement('div');wrap.style.marginBottom='10px'
    wrap.innerHTML=`<div style="display:flex;justify-content:space-between;font-weight:700"><div>${t.name}</div><div class="subtitle">${t.progress ?? 0}%</div></div>
    <div class="progress-bar"><div class="progress-fill" style="width:${t.progress ?? 0}%"></div></div>`
    activeEl.appendChild(wrap)
  }
}

/* Mock Data */
let mockRunning=true
const types=['Malware','Port Scan','Unauthorized Login','Phishing','Ransomware']
function randomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}
function generateMock(){
  const high=randomInt(0,12),med=randomInt(0,18),low=randomInt(0,28),total=high+med+low
  const recent=Array.from({length:6}).map(()=>({time:new Date().toLocaleTimeString(),type:types[randomInt(0,types.length-1)],severity:['Low','Medium','High'][randomInt(0,2)],src:`${randomInt(10,255)}.${randomInt(0,255)}.${randomInt(0,255)}.${randomInt(1,254)}`}))
  const active=[{name:'Suspicious Login Bot',severity:'High',progress:randomInt(10,90)},{name:'Unknown Outbound Traffic',severity:'Medium',progress:randomInt(20,85)}]
  return {total,high,medium:med,low,recentAlerts:recent,active,timestamp:Date.now()}
}
let mockInterval=setInterval(()=>{if(!mockRunning) return; updateDashboard(generateMock())},5000)
updateDashboard(generateMock())

/* Buttons */
byId('btnAPI').addEventListener('click',()=>{
  const url = byId('deviceUrl').value.trim(); if(!url){alert('Enter URL');return;}
  mockRunning=false; startAPI(url)
})
byId('btnWS').addEventListener('click',()=>{
  const url = byId('deviceUrl').value.trim(); if(!url){alert('Enter URL');return;}
  mockRunning=false; startWS(url)
})
byId('btnBluetooth').addEventListener('click',connectBluetooth)
byId('toggleMock')?.addEventListener('click',()=>{mockRunning=!mockRunning;byId('mockStatus').textContent=`Mocking: ${mockRunning?'ON':'OFF'}`})

/* API polling */
let apiInterval=null;
async function startAPI(url){
  try{
    const res = await fetch(url)
    const data = await res.json()
    updateDashboard(data)
    byId('deviceStatus').textContent='API Connected'
    if(apiInterval) clearInterval(apiInterval)
    apiInterval=setInterval(async()=>{const res=await fetch(url);updateDashboard(await res.json())},5000)
  }catch(e){console.error(e);byId('deviceStatus').textContent='API Error'}
}

/* WebSocket */
let ws=null;
function startWS(url){
  if(ws) ws.close()
  ws=new WebSocket(url)
  ws.onopen=()=>byId('deviceStatus').textContent='WebSocket Connected'
  ws.onmessage=e=>{try{updateDashboard(JSON.parse(e.data))}catch(e){console.error(e)}}
  ws.onerror=e=>{console.error(e); byId('deviceStatus').textContent='WS Error'}
  ws.onclose=()=>byId('deviceStatus').textContent='WebSocket Disconnected'
}

/* Bluetooth */
async function connectBluetooth(){
  try{
    const device = await navigator.bluetooth.requestDevice({filters:[{services:['battery_service']}]})
    const server = await device.gatt.connect()
    const service = await server.getPrimaryService('battery_service')
    const characteristic = await service.getCharacteristic('battery_level')
    const value = await characteristic.readValue()
    const battery = value.getUint8(0)
    byId('deviceStatus').textContent=`Battery Level: ${battery}%`
    updateDashboard({total:battery,high:battery/5,medium:battery/3,low:battery/2,recentAlerts:[],active:[]})
    mockRunning=false
  }catch(err){console.error(err);byId('deviceStatus').textContent='Bluetooth Error'}
}
</script>
</body>
</html>
